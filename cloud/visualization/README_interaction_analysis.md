# 交流活跃度分析工具

## 功能说明

这个工具用于分析 `cloud/received_files/` 目录下的 txt 文件，为每个玩家生成交流活跃度曲线图。

## 生成的可视化内容

### 1. 个人交流活跃度曲线
- 为每个玩家生成单独的交流活跃度曲线图
- **横坐标**: 回合数（时间）
- **纵坐标**: 每回合的交流次数
- 包含统计信息：总交流次数、平均每回合交流次数、最高单回合交流次数
- 文件命名: `{玩家名}_interaction_curve.png`

### 2. 所有玩家对比图
- 在同一张图上显示所有玩家的交流活跃度曲线
- 便于比较不同玩家的社交活跃程度
- 文件名: `all_players_interaction_comparison.png`

### 3. 玩家交流排行榜
- 水平条形图显示所有玩家的总交流次数排名
- 从高到低排序，直观展示最活跃的玩家
- 文件名: `players_total_activity_ranking.png`

## 使用方法

### 运行脚本
```bash
cd cloud/visualization
python interaction_activity_analyzer.py
```

### 输出位置
所有生成的图片将保存在 `cloud/visualization/output_visualizations/` 目录下

## 技术细节

### 数据解析
- 从 txt 文件中识别回合标记：`[回合{num}]` 或 `[VT{num}]`
- 统计每回合中的交流次数（通过关键字"进行交流"和对话模式识别）

### 编码处理
- 自动检测文件编码（UTF-8、GBK等）
- 支持包含中文字符的文件

### 字体支持
- 自动配置中文字体（微软雅黑、黑体等）
- 确保图表中的中文正确显示

## 依赖包

脚本需要以下 Python 包：
- matplotlib: 用于绘图
- chardet: 用于自动检测文件编码

这些依赖已包含在项目的 `requirements.txt` 中。

## 示例输出

生成的图表将包括：
- 13个玩家的个人交流曲线图
- 1张所有玩家的对比图
- 1张交流活跃度排行榜

每张图片都是高分辨率（300 DPI）的PNG格式，适合用于报告和分析。
